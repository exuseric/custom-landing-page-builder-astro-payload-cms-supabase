---
import s from "./style.module.css";
import Container from "@components/Container.astro";
import { extractLexicalText } from "@utils/payload/helpers";
import IconLink from "@components/IconLink.astro";
import SocialLinkComponent from "@components/SocialLink.astro";

const props = Astro.props;
---

<section class:list={[s["default_contact"], 'page-section']} id="contact" data-highlight="true" aria-labelledby={props.id}>
    <Container>
        <header class="page-section__header">
            <h2 id={props.id}>{props.title}</h2>
        </header>
        <div
            class={s["default_contact__content"]}
        >
            <div>
                <address class={s["two_column_contact__phone"]}>
                    {
                        props.contact.phone.map((phone: any) => (
                            <IconLink
                                href={phone.number}
                                type={phone.type}
                                text={phone.number}
                            />
                        ))
                    }
                </address>

                <address class={s["two_column_contact__email"]}>
                    {
                        props.contact.email.map((email: any) => (
                            <IconLink
                                href={email.email}
                                type="email"
                                text={email.email}
                            />
                        ))
                    }
                </address>
                {
                    props.socialLinks.length > 0 && (
                        <div class={s["social_links"]}>
                           {props.socialLinks.map((social: any) => (
                            <SocialLinkComponent href={social.url} type={social.platform} text={social.title} />
                           ))}
                        </div>
                    )
                }
                <div class={s["working_hours"]}>
                    <slot set:html={props.operatingHours} />
                </div>
            </div>

            <div class={s["default_contact__location"]}>
                <address>
                    <!-- <slot set:html={extractLexicalText(props.location.address)} /> -->
                    <slot set:html={props.location.address_html} />
                </address>
                <slot set:html={props.location.iframe} />
            </div>
        </div>
    </Container>
</section>
